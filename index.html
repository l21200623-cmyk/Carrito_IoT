<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Control IoT</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" type="png" href="icon.png">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <nav class="panel d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center gap-2">
      <h5 class="m-0"><i class="fa-solid fa-gamepad me-2"></i>Control IoT</h5>
    </div>
    <div class="d-flex gap-2">
      <a class="btn btn-sm btn-primary disabled" href="#">Control</a>
      <a class="btn btn-sm btn-outline-secondary" href="./monitor/index.html">Monitoreo</a>
    </div>
  </nav>

  <div class="app-container">
    
    <div class="panel-col">
      <div class="panel control-zone">
        <div class="velocity-selector">
          <small class="fw-bold me-2">Velocidad:</small>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="velocidadNivel" id="velBaja" value="180">
            <label class="form-check-label" for="velBaja">180</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="velocidadNivel" id="velMedia" value="210" checked>
            <label class="form-check-label" for="velMedia">210</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="velocidadNivel" id="velAlta" value="255">
            <label class="form-check-label" for="velAlta">255</label>
          </div>
        </div>

        <div class="main-controls">
          <div class="d-flex flex-column gap-3 align-items-center">
            <button class="btn-circle" data-status="1"><i class="fa-solid fa-arrow-up fa-2x"></i></button>
            <button class="btn-circle stop" data-status="3"><i class="fa-solid fa-stop fa-2x"></i></button>
            <button class="btn-circle" data-status="2"><i class="fa-solid fa-arrow-down fa-2x"></i></button>
          </div>

          <div class="d-flex align-items-center gap-3">
             <button class="btn-circle" data-status="11"><i class="fa-solid fa-rotate-left fa-1x"></i></button>
             <div class="control-grid">
                <button class="btn-square" data-status="5"><i class="fa-solid fa-arrow-up fa-2x rotate--45"></i></button>
                <button class="btn-square" data-status="4"><i class="fa-solid fa-arrow-up fa-2x rotate-45"></i></button>
                <button class="btn-square" data-status="9"><i class="fa-solid fa-arrow-left fa-2x"></i></button>
                <button class="btn-square" data-status="8"><i class="fa-solid fa-arrow-right fa-2x"></i></button>
                <button class="btn-square" data-status="7"><i class="fa-solid fa-arrow-up fa-2x rotate--135"></i></button>
                <button class="btn-square" data-status="6"><i class="fa-solid fa-arrow-up fa-2x rotate-135"></i></button>
             </div>
             <button class="btn-circle" data-status="10"><i class="fa-solid fa-rotate-right fa-1x"></i></button>
          </div>
        </div>
      </div>
    </div>

    <div class="panel-col">
      
      <section class="panel py-2">
        <div class="d-flex align-items-center gap-2 justify-content-between">
          <div class="d-flex align-items-center gap-2">
            <label style="font-size: 0.85rem;">ID Disp:</label>
            <input id="deviceIdInput" type="number" class="form-control form-control-sm" style="width: 70px;" value="1">
            <button id="btnSetDevice" class="btn btn-sm btn-primary">Set</button>
          </div>
          <div class="status-box">
             Estado: <span id="estado" class="fw-bold">...</span>
          </div>
        </div>
      </section>

      <section class="panel obstacle-box">
        <h6 class="m-0 mb-2"><i class="fa-solid fa-triangle-exclamation text-warning"></i> Simulaci√≥n Obst√°culo</h6>
        <div class="d-flex gap-2">
          <select id="obstacleType" class="form-select form-select-sm">
            <option value="1">1‚ÄîAdelante</option>
            <option value="2">2‚ÄîIzq</option>
            <option value="3">3‚ÄîDer</option>
            <option value="5">5‚ÄîAtr√°s</option>
          </select>
          <button id="btnObstacle" class="btn btn-sm btn-danger text-nowrap">Simular</button>
        </div>
        <div id="obsMsg" class="msg mt-1"></div>
      </section>

      <section class="panel flex-grow-1">
        <div class="d-flex justify-content-between align-items-center mb-2">
           <h6 class="m-0">Modo Autom√°tico</h6>
           <span id="recBadge" class="badge bg-danger hidden">REC</span>
        </div>
        
        <div class="seq-controls">
          <button id="btnStartRec" class="btn btn-sm btn-outline-dark">üé¨ Grabar</button>
          <button id="btnStopRec" class="btn btn-sm btn-outline-danger" disabled>‚èπ Guardar</button>
        </div>

        <div id="seqForm" class="hidden my-2 p-2 bg-light rounded">
          <input id="seqName" type="text" class="form-control form-control-sm mb-1" placeholder="Nombre secuencia...">
          <button id="btnSaveSeq" class="btn btn-sm btn-success w-100">Confirmar Guardado</button>
          <span id="seqSaveMsg" class="msg d-block"></span>
        </div>

        <hr class="my-2"/>

        <div class="d-flex gap-1 mb-1">
            <button id="btnReloadSeq" class="btn btn-sm btn-light border"><i class="fa-solid fa-sync"></i></button>
            <select id="seqSelect" class="form-select form-select-sm"></select>
        </div>
        <div class="d-flex gap-2">
            <button id="btnRunSeq" class="btn btn-sm btn-success flex-grow-1">‚ñ∂ Ejecutar</button>
            <button id="btnStopAuto" class="btn btn-sm btn-secondary">Stop</button>
        </div>
        <div id="seqRunMsg" class="msg mt-1"></div>
        
        <div id="seqPreview" class="border rounded p-1 bg-white mt-2 text-muted fst-italic"></div>
      </section>

    </div>
  </div>

  <footer>Desarrollado por Brandon PM ¬© 2025</footer>
  <script type="module" src="js/config.js"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>
